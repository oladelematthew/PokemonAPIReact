{"ast":null,"code":"'use strict';\n\nvar PropTypes = require('prop-types');\n\nvar React = require('react');\n\nvar ReactDOM = require('react-dom');\n\nvar SPACE_KEY = 32;\nvar ENTER_KEY = 13;\n\nfunction getTouchProps(touch) {\n  if (!touch) return {};\n  return {\n    pageX: touch.pageX,\n    pageY: touch.pageY,\n    clientX: touch.clientX,\n    clientY: touch.clientY\n  };\n}\n\nvar Mixin = {\n  propTypes: {\n    moveThreshold: PropTypes.number,\n    // pixels to move before cancelling tap\n    moveXThreshold: PropTypes.number,\n    // pixels on the x axis to move before cancelling tap (overrides moveThreshold)\n    moveYThreshold: PropTypes.number,\n    // pixels on the y axis to move before cancelling tap (overrides moveThreshold)\n    allowReactivation: PropTypes.bool,\n    // after moving outside of the moveThreshold will you allow\n    // reactivation by moving back within the moveThreshold?\n    activeDelay: PropTypes.number,\n    // ms to wait before adding the `-active` class\n    pressDelay: PropTypes.number,\n    // ms to wait before detecting a press\n    pressMoveThreshold: PropTypes.number,\n    // pixels to move before cancelling press\n    preventDefault: PropTypes.bool,\n    // whether to preventDefault on all events\n    stopPropagation: PropTypes.bool,\n    // whether to stopPropagation on all events\n    onTap: PropTypes.func,\n    // fires when a tap is detected\n    onPress: PropTypes.func,\n    // fires when a press is detected\n    onTouchStart: PropTypes.func,\n    // pass-through touch event\n    onTouchMove: PropTypes.func,\n    // pass-through touch event\n    onTouchEnd: PropTypes.func,\n    // pass-through touch event\n    onMouseDown: PropTypes.func,\n    // pass-through mouse event\n    onMouseUp: PropTypes.func,\n    // pass-through mouse event\n    onMouseMove: PropTypes.func,\n    // pass-through mouse event\n    onMouseOut: PropTypes.func,\n    // pass-through mouse event\n    onKeyDown: PropTypes.func,\n    // pass-through key event\n    onKeyUp: PropTypes.func // pass-through key event\n\n  },\n  getDefaultProps: function getDefaultProps() {\n    return {\n      activeDelay: 0,\n      allowReactivation: true,\n      moveThreshold: 100,\n      pressDelay: 1000,\n      pressMoveThreshold: 5\n    };\n  },\n  getInitialState: function getInitialState() {\n    return {\n      isActive: false,\n      touchActive: false,\n      pinchActive: false\n    };\n  },\n  componentDidMount: function componentDidMount() {\n    this.isMounted = true;\n  },\n  componentWillUnmount: function componentWillUnmount() {\n    this.isMounted = false;\n    this.cleanupScrollDetection();\n    this.cancelPressDetection();\n    this.clearActiveTimeout();\n  },\n  componentWillUpdate: function componentWillUpdate(nextProps, nextState) {\n    if (this.state.isActive && !nextState.isActive) {\n      this.props.onDeactivate && this.props.onDeactivate();\n    } else if (!this.state.isActive && nextState.isActive) {\n      this.props.onReactivate && this.props.onReactivate();\n    }\n  },\n  processEvent: function processEvent(event) {\n    if (this.props.preventDefault) event.preventDefault();\n    if (this.props.stopPropagation) event.stopPropagation();\n  },\n  onTouchStart: function onTouchStart(event) {\n    if (this.props.onTouchStart && this.props.onTouchStart(event) === false) return;\n    this.processEvent(event);\n    window._blockMouseEvents = true;\n\n    if (event.touches.length === 1) {\n      this._initialTouch = this._lastTouch = getTouchProps(event.touches[0]);\n      this.initScrollDetection();\n      this.initPressDetection(event, this.endTouch);\n      this.initTouchmoveDetection();\n\n      if (this.props.activeDelay > 0) {\n        this._activeTimeout = setTimeout(this.makeActive, this.props.activeDelay);\n      } else {\n        this.makeActive();\n      }\n    } else if (this.onPinchStart && (this.props.onPinchStart || this.props.onPinchMove || this.props.onPinchEnd) && event.touches.length === 2) {\n      this.onPinchStart(event);\n    }\n  },\n  makeActive: function makeActive() {\n    if (!this.isMounted) return;\n    this.clearActiveTimeout();\n    this.setState({\n      isActive: true\n    });\n  },\n  clearActiveTimeout: function clearActiveTimeout() {\n    clearTimeout(this._activeTimeout);\n    this._activeTimeout = false;\n  },\n  initScrollDetection: function initScrollDetection() {\n    this._scrollPos = {\n      top: 0,\n      left: 0\n    };\n    this._scrollParents = [];\n    this._scrollParentPos = [];\n    var node = ReactDOM.findDOMNode(this);\n\n    while (node) {\n      if (node.scrollHeight > node.offsetHeight || node.scrollWidth > node.offsetWidth) {\n        this._scrollParents.push(node);\n\n        this._scrollParentPos.push(node.scrollTop + node.scrollLeft);\n\n        this._scrollPos.top += node.scrollTop;\n        this._scrollPos.left += node.scrollLeft;\n      }\n\n      node = node.parentNode;\n    }\n  },\n  initTouchmoveDetection: function initTouchmoveDetection() {\n    this._touchmoveTriggeredTimes = 0;\n  },\n  cancelTouchmoveDetection: function cancelTouchmoveDetection() {\n    if (this._touchmoveDetectionTimeout) {\n      clearTimeout(this._touchmoveDetectionTimeout);\n      this._touchmoveDetectionTimeout = null;\n      this._touchmoveTriggeredTimes = 0;\n    }\n  },\n  calculateMovement: function calculateMovement(touch) {\n    return {\n      x: Math.abs(touch.clientX - this._initialTouch.clientX),\n      y: Math.abs(touch.clientY - this._initialTouch.clientY)\n    };\n  },\n  detectScroll: function detectScroll() {\n    var currentScrollPos = {\n      top: 0,\n      left: 0\n    };\n\n    for (var i = 0; i < this._scrollParents.length; i++) {\n      currentScrollPos.top += this._scrollParents[i].scrollTop;\n      currentScrollPos.left += this._scrollParents[i].scrollLeft;\n    }\n\n    return !(currentScrollPos.top === this._scrollPos.top && currentScrollPos.left === this._scrollPos.left);\n  },\n  cleanupScrollDetection: function cleanupScrollDetection() {\n    this._scrollParents = undefined;\n    this._scrollPos = undefined;\n  },\n  initPressDetection: function initPressDetection(event, callback) {\n    if (!this.props.onPress) return; // SyntheticEvent objects are pooled, so persist the event so it can be referenced asynchronously\n\n    event.persist();\n    this._pressTimeout = setTimeout(function () {\n      this.props.onPress(event);\n      callback();\n    }.bind(this), this.props.pressDelay);\n  },\n  cancelPressDetection: function cancelPressDetection() {\n    clearTimeout(this._pressTimeout);\n  },\n  onTouchMove: function onTouchMove(event) {\n    if (this._initialTouch) {\n      this.processEvent(event);\n\n      if (this.detectScroll()) {\n        return this.endTouch(event);\n      } else {\n        if (this._touchmoveTriggeredTimes++ === 0) {\n          this._touchmoveDetectionTimeout = setTimeout(function () {\n            if (this._touchmoveTriggeredTimes === 1) {\n              this.endTouch(event);\n            }\n          }.bind(this), 64);\n        }\n      }\n\n      this.props.onTouchMove && this.props.onTouchMove(event);\n      this._lastTouch = getTouchProps(event.touches[0]);\n      var movement = this.calculateMovement(this._lastTouch);\n\n      if (movement.x > this.props.pressMoveThreshold || movement.y > this.props.pressMoveThreshold) {\n        this.cancelPressDetection();\n      }\n\n      if (movement.x > (this.props.moveXThreshold || this.props.moveThreshold) || movement.y > (this.props.moveYThreshold || this.props.moveThreshold)) {\n        if (this.state.isActive) {\n          if (this.props.allowReactivation) {\n            this.setState({\n              isActive: false\n            });\n          } else {\n            return this.endTouch(event);\n          }\n        } else if (this._activeTimeout) {\n          this.clearActiveTimeout();\n        }\n      } else {\n        if (!this.state.isActive && !this._activeTimeout) {\n          this.setState({\n            isActive: true\n          });\n        }\n      }\n    } else if (this._initialPinch && event.touches.length === 2 && this.onPinchMove) {\n      this.onPinchMove(event);\n      event.preventDefault();\n    }\n  },\n  onTouchEnd: function onTouchEnd(event) {\n    var _this = this;\n\n    if (this._initialTouch) {\n      this.processEvent(event);\n      var afterEndTouch;\n      var movement = this.calculateMovement(this._lastTouch);\n\n      if (movement.x <= (this.props.moveXThreshold || this.props.moveThreshold) && movement.y <= (this.props.moveYThreshold || this.props.moveThreshold) && this.props.onTap) {\n        event.preventDefault();\n\n        afterEndTouch = function afterEndTouch() {\n          var finalParentScrollPos = _this._scrollParents.map(function (node) {\n            return node.scrollTop + node.scrollLeft;\n          });\n\n          var stoppedMomentumScroll = _this._scrollParentPos.some(function (end, i) {\n            return end !== finalParentScrollPos[i];\n          });\n\n          if (!stoppedMomentumScroll) {\n            _this.props.onTap(event);\n          }\n        };\n      }\n\n      this.endTouch(event, afterEndTouch);\n    } else if (this.onPinchEnd && this._initialPinch && event.touches.length + event.changedTouches.length === 2) {\n      this.onPinchEnd(event);\n      event.preventDefault();\n    }\n  },\n  endTouch: function endTouch(event, callback) {\n    this.cancelTouchmoveDetection();\n    this.cancelPressDetection();\n    this.clearActiveTimeout();\n\n    if (event && this.props.onTouchEnd) {\n      this.props.onTouchEnd(event);\n    }\n\n    this._initialTouch = null;\n    this._lastTouch = null;\n\n    if (callback) {\n      callback();\n    }\n\n    if (this.state.isActive) {\n      this.setState({\n        isActive: false\n      });\n    }\n  },\n  onMouseDown: function onMouseDown(event) {\n    if (window._blockMouseEvents) {\n      window._blockMouseEvents = false;\n      return;\n    }\n\n    if (this.props.onMouseDown && this.props.onMouseDown(event) === false) return;\n    this.processEvent(event);\n    this.initPressDetection(event, this.endMouseEvent);\n    this._mouseDown = true;\n    this.setState({\n      isActive: true\n    });\n  },\n  onMouseMove: function onMouseMove(event) {\n    if (window._blockMouseEvents || !this._mouseDown) return;\n    this.processEvent(event);\n    this.props.onMouseMove && this.props.onMouseMove(event);\n  },\n  onMouseUp: function onMouseUp(event) {\n    if (window._blockMouseEvents || !this._mouseDown) return;\n    this.processEvent(event);\n    this.props.onMouseUp && this.props.onMouseUp(event);\n    this.props.onTap && this.props.onTap(event);\n    this.endMouseEvent();\n  },\n  onMouseOut: function onMouseOut(event) {\n    if (window._blockMouseEvents || !this._mouseDown) return;\n    this.processEvent(event);\n    this.props.onMouseOut && this.props.onMouseOut(event);\n    this.endMouseEvent();\n  },\n  endMouseEvent: function endMouseEvent() {\n    this.cancelPressDetection();\n    this._mouseDown = false;\n    this.setState({\n      isActive: false\n    });\n  },\n  onKeyUp: function onKeyUp(event) {\n    if (!this._keyDown) return;\n    this.processEvent(event);\n    this.props.onKeyUp && this.props.onKeyUp(event);\n    this.props.onTap && this.props.onTap(event);\n    this._keyDown = false;\n    this.cancelPressDetection();\n    this.setState({\n      isActive: false\n    });\n  },\n  onKeyDown: function onKeyDown(event) {\n    if (this.props.onKeyDown && this.props.onKeyDown(event) === false) return;\n    if (event.which !== SPACE_KEY && event.which !== ENTER_KEY) return;\n    if (this._keyDown) return;\n    this.initPressDetection(event, this.endKeyEvent);\n    this.processEvent(event);\n    this._keyDown = true;\n    this.setState({\n      isActive: true\n    });\n  },\n  endKeyEvent: function endKeyEvent() {\n    this.cancelPressDetection();\n    this._keyDown = false;\n    this.setState({\n      isActive: false\n    });\n  },\n  cancelTap: function cancelTap() {\n    this.endTouch();\n    this._mouseDown = false;\n  },\n  handlers: function handlers() {\n    return {\n      onTouchStart: this.onTouchStart,\n      onTouchMove: this.onTouchMove,\n      onTouchEnd: this.onTouchEnd,\n      onMouseDown: this.onMouseDown,\n      onMouseUp: this.onMouseUp,\n      onMouseMove: this.onMouseMove,\n      onMouseOut: this.onMouseOut,\n      onKeyDown: this.onKeyDown,\n      onKeyUp: this.onKeyUp\n    };\n  }\n};\nmodule.exports = Mixin;","map":{"version":3,"sources":["/Users/matthewoladele/ElevenFiftyProjects/projects/RedBadge/RedBadgeProject/PokemonAPITypescript/node_modules/react-tappable/lib/TappableMixin.js"],"names":["PropTypes","require","React","ReactDOM","SPACE_KEY","ENTER_KEY","getTouchProps","touch","pageX","pageY","clientX","clientY","Mixin","propTypes","moveThreshold","number","moveXThreshold","moveYThreshold","allowReactivation","bool","activeDelay","pressDelay","pressMoveThreshold","preventDefault","stopPropagation","onTap","func","onPress","onTouchStart","onTouchMove","onTouchEnd","onMouseDown","onMouseUp","onMouseMove","onMouseOut","onKeyDown","onKeyUp","getDefaultProps","getInitialState","isActive","touchActive","pinchActive","componentDidMount","isMounted","componentWillUnmount","cleanupScrollDetection","cancelPressDetection","clearActiveTimeout","componentWillUpdate","nextProps","nextState","state","props","onDeactivate","onReactivate","processEvent","event","window","_blockMouseEvents","touches","length","_initialTouch","_lastTouch","initScrollDetection","initPressDetection","endTouch","initTouchmoveDetection","_activeTimeout","setTimeout","makeActive","onPinchStart","onPinchMove","onPinchEnd","setState","clearTimeout","_scrollPos","top","left","_scrollParents","_scrollParentPos","node","findDOMNode","scrollHeight","offsetHeight","scrollWidth","offsetWidth","push","scrollTop","scrollLeft","parentNode","_touchmoveTriggeredTimes","cancelTouchmoveDetection","_touchmoveDetectionTimeout","calculateMovement","x","Math","abs","y","detectScroll","currentScrollPos","i","undefined","callback","persist","_pressTimeout","bind","movement","_initialPinch","_this","afterEndTouch","finalParentScrollPos","map","stoppedMomentumScroll","some","end","changedTouches","endMouseEvent","_mouseDown","_keyDown","which","endKeyEvent","cancelTap","handlers","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar PropTypes = require('prop-types');\nvar React = require('react');\nvar ReactDOM = require('react-dom');\n\nvar SPACE_KEY = 32;\nvar ENTER_KEY = 13;\n\nfunction getTouchProps(touch) {\n\tif (!touch) return {};\n\treturn {\n\t\tpageX: touch.pageX,\n\t\tpageY: touch.pageY,\n\t\tclientX: touch.clientX,\n\t\tclientY: touch.clientY\n\t};\n}\n\nvar Mixin = {\n\tpropTypes: {\n\t\tmoveThreshold: PropTypes.number, // pixels to move before cancelling tap\n\t\tmoveXThreshold: PropTypes.number, // pixels on the x axis to move before cancelling tap (overrides moveThreshold)\n\t\tmoveYThreshold: PropTypes.number, // pixels on the y axis to move before cancelling tap (overrides moveThreshold)\n\t\tallowReactivation: PropTypes.bool, // after moving outside of the moveThreshold will you allow\n\t\t// reactivation by moving back within the moveThreshold?\n\t\tactiveDelay: PropTypes.number, // ms to wait before adding the `-active` class\n\t\tpressDelay: PropTypes.number, // ms to wait before detecting a press\n\t\tpressMoveThreshold: PropTypes.number, // pixels to move before cancelling press\n\t\tpreventDefault: PropTypes.bool, // whether to preventDefault on all events\n\t\tstopPropagation: PropTypes.bool, // whether to stopPropagation on all events\n\n\t\tonTap: PropTypes.func, // fires when a tap is detected\n\t\tonPress: PropTypes.func, // fires when a press is detected\n\t\tonTouchStart: PropTypes.func, // pass-through touch event\n\t\tonTouchMove: PropTypes.func, // pass-through touch event\n\t\tonTouchEnd: PropTypes.func, // pass-through touch event\n\t\tonMouseDown: PropTypes.func, // pass-through mouse event\n\t\tonMouseUp: PropTypes.func, // pass-through mouse event\n\t\tonMouseMove: PropTypes.func, // pass-through mouse event\n\t\tonMouseOut: PropTypes.func, // pass-through mouse event\n\t\tonKeyDown: PropTypes.func, // pass-through key event\n\t\tonKeyUp: PropTypes.func // pass-through key event\n\t},\n\n\tgetDefaultProps: function getDefaultProps() {\n\t\treturn {\n\t\t\tactiveDelay: 0,\n\t\t\tallowReactivation: true,\n\t\t\tmoveThreshold: 100,\n\t\t\tpressDelay: 1000,\n\t\t\tpressMoveThreshold: 5\n\t\t};\n\t},\n\n\tgetInitialState: function getInitialState() {\n\t\treturn {\n\t\t\tisActive: false,\n\t\t\ttouchActive: false,\n\t\t\tpinchActive: false\n\t\t};\n\t},\n\n\tcomponentDidMount: function componentDidMount() {\n\t\tthis.isMounted = true;\n\t},\n\n\tcomponentWillUnmount: function componentWillUnmount() {\n\t\tthis.isMounted = false;\n\t\tthis.cleanupScrollDetection();\n\t\tthis.cancelPressDetection();\n\t\tthis.clearActiveTimeout();\n\t},\n\n\tcomponentWillUpdate: function componentWillUpdate(nextProps, nextState) {\n\t\tif (this.state.isActive && !nextState.isActive) {\n\t\t\tthis.props.onDeactivate && this.props.onDeactivate();\n\t\t} else if (!this.state.isActive && nextState.isActive) {\n\t\t\tthis.props.onReactivate && this.props.onReactivate();\n\t\t}\n\t},\n\n\tprocessEvent: function processEvent(event) {\n\t\tif (this.props.preventDefault) event.preventDefault();\n\t\tif (this.props.stopPropagation) event.stopPropagation();\n\t},\n\n\tonTouchStart: function onTouchStart(event) {\n\t\tif (this.props.onTouchStart && this.props.onTouchStart(event) === false) return;\n\t\tthis.processEvent(event);\n\t\twindow._blockMouseEvents = true;\n\t\tif (event.touches.length === 1) {\n\t\t\tthis._initialTouch = this._lastTouch = getTouchProps(event.touches[0]);\n\t\t\tthis.initScrollDetection();\n\t\t\tthis.initPressDetection(event, this.endTouch);\n\t\t\tthis.initTouchmoveDetection();\n\t\t\tif (this.props.activeDelay > 0) {\n\t\t\t\tthis._activeTimeout = setTimeout(this.makeActive, this.props.activeDelay);\n\t\t\t} else {\n\t\t\t\tthis.makeActive();\n\t\t\t}\n\t\t} else if (this.onPinchStart && (this.props.onPinchStart || this.props.onPinchMove || this.props.onPinchEnd) && event.touches.length === 2) {\n\t\t\tthis.onPinchStart(event);\n\t\t}\n\t},\n\n\tmakeActive: function makeActive() {\n\t\tif (!this.isMounted) return;\n\t\tthis.clearActiveTimeout();\n\t\tthis.setState({\n\t\t\tisActive: true\n\t\t});\n\t},\n\n\tclearActiveTimeout: function clearActiveTimeout() {\n\t\tclearTimeout(this._activeTimeout);\n\t\tthis._activeTimeout = false;\n\t},\n\n\tinitScrollDetection: function initScrollDetection() {\n\t\tthis._scrollPos = { top: 0, left: 0 };\n\t\tthis._scrollParents = [];\n\t\tthis._scrollParentPos = [];\n\t\tvar node = ReactDOM.findDOMNode(this);\n\n\t\twhile (node) {\n\t\t\tif (node.scrollHeight > node.offsetHeight || node.scrollWidth > node.offsetWidth) {\n\t\t\t\tthis._scrollParents.push(node);\n\t\t\t\tthis._scrollParentPos.push(node.scrollTop + node.scrollLeft);\n\t\t\t\tthis._scrollPos.top += node.scrollTop;\n\t\t\t\tthis._scrollPos.left += node.scrollLeft;\n\t\t\t}\n\n\t\t\tnode = node.parentNode;\n\t\t}\n\t},\n\n\tinitTouchmoveDetection: function initTouchmoveDetection() {\n\t\tthis._touchmoveTriggeredTimes = 0;\n\t},\n\n\tcancelTouchmoveDetection: function cancelTouchmoveDetection() {\n\t\tif (this._touchmoveDetectionTimeout) {\n\t\t\tclearTimeout(this._touchmoveDetectionTimeout);\n\t\t\tthis._touchmoveDetectionTimeout = null;\n\t\t\tthis._touchmoveTriggeredTimes = 0;\n\t\t}\n\t},\n\n\tcalculateMovement: function calculateMovement(touch) {\n\t\treturn {\n\t\t\tx: Math.abs(touch.clientX - this._initialTouch.clientX),\n\t\t\ty: Math.abs(touch.clientY - this._initialTouch.clientY)\n\t\t};\n\t},\n\n\tdetectScroll: function detectScroll() {\n\t\tvar currentScrollPos = { top: 0, left: 0 };\n\t\tfor (var i = 0; i < this._scrollParents.length; i++) {\n\t\t\tcurrentScrollPos.top += this._scrollParents[i].scrollTop;\n\t\t\tcurrentScrollPos.left += this._scrollParents[i].scrollLeft;\n\t\t}\n\t\treturn !(currentScrollPos.top === this._scrollPos.top && currentScrollPos.left === this._scrollPos.left);\n\t},\n\n\tcleanupScrollDetection: function cleanupScrollDetection() {\n\t\tthis._scrollParents = undefined;\n\t\tthis._scrollPos = undefined;\n\t},\n\n\tinitPressDetection: function initPressDetection(event, callback) {\n\t\tif (!this.props.onPress) return;\n\n\t\t// SyntheticEvent objects are pooled, so persist the event so it can be referenced asynchronously\n\t\tevent.persist();\n\n\t\tthis._pressTimeout = setTimeout(function () {\n\t\t\tthis.props.onPress(event);\n\t\t\tcallback();\n\t\t}.bind(this), this.props.pressDelay);\n\t},\n\n\tcancelPressDetection: function cancelPressDetection() {\n\t\tclearTimeout(this._pressTimeout);\n\t},\n\n\tonTouchMove: function onTouchMove(event) {\n\t\tif (this._initialTouch) {\n\t\t\tthis.processEvent(event);\n\n\t\t\tif (this.detectScroll()) {\n\t\t\t\treturn this.endTouch(event);\n\t\t\t} else {\n\t\t\t\tif (this._touchmoveTriggeredTimes++ === 0) {\n\t\t\t\t\tthis._touchmoveDetectionTimeout = setTimeout(function () {\n\t\t\t\t\t\tif (this._touchmoveTriggeredTimes === 1) {\n\t\t\t\t\t\t\tthis.endTouch(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this), 64);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.props.onTouchMove && this.props.onTouchMove(event);\n\t\t\tthis._lastTouch = getTouchProps(event.touches[0]);\n\t\t\tvar movement = this.calculateMovement(this._lastTouch);\n\t\t\tif (movement.x > this.props.pressMoveThreshold || movement.y > this.props.pressMoveThreshold) {\n\t\t\t\tthis.cancelPressDetection();\n\t\t\t}\n\t\t\tif (movement.x > (this.props.moveXThreshold || this.props.moveThreshold) || movement.y > (this.props.moveYThreshold || this.props.moveThreshold)) {\n\t\t\t\tif (this.state.isActive) {\n\t\t\t\t\tif (this.props.allowReactivation) {\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tisActive: false\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn this.endTouch(event);\n\t\t\t\t\t}\n\t\t\t\t} else if (this._activeTimeout) {\n\t\t\t\t\tthis.clearActiveTimeout();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!this.state.isActive && !this._activeTimeout) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tisActive: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (this._initialPinch && event.touches.length === 2 && this.onPinchMove) {\n\t\t\tthis.onPinchMove(event);\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\n\tonTouchEnd: function onTouchEnd(event) {\n\t\tvar _this = this;\n\n\t\tif (this._initialTouch) {\n\t\t\tthis.processEvent(event);\n\t\t\tvar afterEndTouch;\n\t\t\tvar movement = this.calculateMovement(this._lastTouch);\n\t\t\tif (movement.x <= (this.props.moveXThreshold || this.props.moveThreshold) && movement.y <= (this.props.moveYThreshold || this.props.moveThreshold) && this.props.onTap) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tafterEndTouch = function afterEndTouch() {\n\t\t\t\t\tvar finalParentScrollPos = _this._scrollParents.map(function (node) {\n\t\t\t\t\t\treturn node.scrollTop + node.scrollLeft;\n\t\t\t\t\t});\n\t\t\t\t\tvar stoppedMomentumScroll = _this._scrollParentPos.some(function (end, i) {\n\t\t\t\t\t\treturn end !== finalParentScrollPos[i];\n\t\t\t\t\t});\n\t\t\t\t\tif (!stoppedMomentumScroll) {\n\t\t\t\t\t\t_this.props.onTap(event);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\tthis.endTouch(event, afterEndTouch);\n\t\t} else if (this.onPinchEnd && this._initialPinch && event.touches.length + event.changedTouches.length === 2) {\n\t\t\tthis.onPinchEnd(event);\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\n\tendTouch: function endTouch(event, callback) {\n\t\tthis.cancelTouchmoveDetection();\n\t\tthis.cancelPressDetection();\n\t\tthis.clearActiveTimeout();\n\t\tif (event && this.props.onTouchEnd) {\n\t\t\tthis.props.onTouchEnd(event);\n\t\t}\n\t\tthis._initialTouch = null;\n\t\tthis._lastTouch = null;\n\t\tif (callback) {\n\t\t\tcallback();\n\t\t}\n\t\tif (this.state.isActive) {\n\t\t\tthis.setState({\n\t\t\t\tisActive: false\n\t\t\t});\n\t\t}\n\t},\n\n\tonMouseDown: function onMouseDown(event) {\n\t\tif (window._blockMouseEvents) {\n\t\t\twindow._blockMouseEvents = false;\n\t\t\treturn;\n\t\t}\n\t\tif (this.props.onMouseDown && this.props.onMouseDown(event) === false) return;\n\t\tthis.processEvent(event);\n\t\tthis.initPressDetection(event, this.endMouseEvent);\n\t\tthis._mouseDown = true;\n\t\tthis.setState({\n\t\t\tisActive: true\n\t\t});\n\t},\n\n\tonMouseMove: function onMouseMove(event) {\n\t\tif (window._blockMouseEvents || !this._mouseDown) return;\n\t\tthis.processEvent(event);\n\t\tthis.props.onMouseMove && this.props.onMouseMove(event);\n\t},\n\n\tonMouseUp: function onMouseUp(event) {\n\t\tif (window._blockMouseEvents || !this._mouseDown) return;\n\t\tthis.processEvent(event);\n\t\tthis.props.onMouseUp && this.props.onMouseUp(event);\n\t\tthis.props.onTap && this.props.onTap(event);\n\t\tthis.endMouseEvent();\n\t},\n\n\tonMouseOut: function onMouseOut(event) {\n\t\tif (window._blockMouseEvents || !this._mouseDown) return;\n\t\tthis.processEvent(event);\n\t\tthis.props.onMouseOut && this.props.onMouseOut(event);\n\t\tthis.endMouseEvent();\n\t},\n\n\tendMouseEvent: function endMouseEvent() {\n\t\tthis.cancelPressDetection();\n\t\tthis._mouseDown = false;\n\t\tthis.setState({\n\t\t\tisActive: false\n\t\t});\n\t},\n\n\tonKeyUp: function onKeyUp(event) {\n\t\tif (!this._keyDown) return;\n\t\tthis.processEvent(event);\n\t\tthis.props.onKeyUp && this.props.onKeyUp(event);\n\t\tthis.props.onTap && this.props.onTap(event);\n\t\tthis._keyDown = false;\n\t\tthis.cancelPressDetection();\n\t\tthis.setState({\n\t\t\tisActive: false\n\t\t});\n\t},\n\n\tonKeyDown: function onKeyDown(event) {\n\t\tif (this.props.onKeyDown && this.props.onKeyDown(event) === false) return;\n\t\tif (event.which !== SPACE_KEY && event.which !== ENTER_KEY) return;\n\t\tif (this._keyDown) return;\n\t\tthis.initPressDetection(event, this.endKeyEvent);\n\t\tthis.processEvent(event);\n\t\tthis._keyDown = true;\n\t\tthis.setState({\n\t\t\tisActive: true\n\t\t});\n\t},\n\n\tendKeyEvent: function endKeyEvent() {\n\t\tthis.cancelPressDetection();\n\t\tthis._keyDown = false;\n\t\tthis.setState({\n\t\t\tisActive: false\n\t\t});\n\t},\n\n\tcancelTap: function cancelTap() {\n\t\tthis.endTouch();\n\t\tthis._mouseDown = false;\n\t},\n\n\thandlers: function handlers() {\n\t\treturn {\n\t\t\tonTouchStart: this.onTouchStart,\n\t\t\tonTouchMove: this.onTouchMove,\n\t\t\tonTouchEnd: this.onTouchEnd,\n\t\t\tonMouseDown: this.onMouseDown,\n\t\t\tonMouseUp: this.onMouseUp,\n\t\t\tonMouseMove: this.onMouseMove,\n\t\t\tonMouseOut: this.onMouseOut,\n\t\t\tonKeyDown: this.onKeyDown,\n\t\t\tonKeyUp: this.onKeyUp\n\t\t};\n\t}\n};\n\nmodule.exports = Mixin;"]},"metadata":{},"sourceType":"script"}